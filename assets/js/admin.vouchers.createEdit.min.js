var NAILS_Admin_Shop_Vouchers_CreateEdit;NAILS_Admin_Shop_Vouchers_CreateEdit=function(){var e=this;return e.__construct=function(){$("select[name=type]").on("change",function(){e.handleTypeChange()}),$("select[name=discount_application]").on("change",function(){e.handleApplicationChange()}),$("#generate-code").on("click",function(){return e.generateCode()}),e.handleApplicationChange(),e.handleTypeChange(),$(".datetime1").datetimepicker({dateFormat:"yy-mm-dd",timeFormat:"HH:mm:ss",beforeShow:function(){$(".datetime1").datetimepicker("option","maxDate",$(".datetime2").datetimepicker("getDate"))},onSelect:function(){$(".datetime2").datetimepicker("option","minDate",$(".datetime1").datetimepicker("getDate"))}}),$(".datetime2").datetimepicker({dateFormat:"yy-mm-dd",timeFormat:"HH:mm:ss",minDate:new Date,beforeShow:function(){$(".datetime2").datetimepicker("option","minDate",$(".datetime1").datetimepicker("getDate"))},onSelect:function(){$(".datetime1").datetimepicker("option","maxDate",$(".datetime2").datetimepicker("getDate"))}}),$("#product-id").select2({placeholder:"Search for a product",minimumInputLength:3,ajax:{url:window.SITE_URL+"api/shop/products/search",dataType:"json",quietMillis:250,data:function(e){return{keywords:e}},results:function(e){var t={results:[]};for(var a in e.results)e.results.hasOwnProperty(a)&&t.results.push({id:e.results[a].id,text:e.results[a].label});return t},cache:!0},initSelection:function(e,t){var a=$(e).val();""!==a&&$.ajax({url:window.SITE_URL+"api/shop/products/id/"+a,dataType:"json"}).done(function(e){var a={id:e.product.id,text:e.product.label};t(a)})}})},e.handleTypeChange=function(){switch($("select[name=type]").val()){case"NORMAL":$("#type-limited").hide(),$("select[name=discount_type]").removeAttr("disabled"),$("select[name=discount_application]").removeAttr("disabled");break;case"LIMITED_USE":$("#type-limited").show(),$("select[name=discount_type]").removeAttr("disabled"),$("select[name=discount_application]").removeAttr("disabled");break;case"GIFT_CARD":$("#type-limited").hide(),$("#application-product_types").hide(),$("select[name=discount_type] option[selected=selected]").attr("selected",""),$("select[name=discount_type] option[value=AMOUNT]").attr("selected","selected"),$("select[name=discount_type]").attr("disabled","disabled"),$("select[name=discount_type]").trigger("change"),$("select[name=discount_application] option[selected=selected]").attr("selected",""),$("select[name=discount_application] option[value=ALL]").attr("selected","selected"),$("select[name=discount_application]").attr("disabled","disabled"),$("select[name=discount_application]").trigger("change")}e.hideNoExtendedData()},e.handleApplicationChange=function(){var t=$("select[name=discount_application]").val();switch(t){case"PRODUCTS":case"SHIPPING":case"ALL":$("#no-extended-data").show(),$("#application-product_types").hide(),$("#application-product").hide();break;case"PRODUCT_TYPES":$("#no-extended-data").hide(),$("#application-product_types").show(),$("#application-product").hide();break;case"PRODUCT":$("#no-extended-data").hide(),$("#application-product_types").hide(),$("#application-product").show()}"SHIPPING"===t||"ALL"===t?$("select[name=discount_type]").val("PERCENTAGE").find("option[value=AMOUNT]").prop("disabled",!0).text("Specific amount (cannot apply amount based discounts when voucher can apply to shipping cost)"):$("select[name=discount_type]").find("option[value=AMOUNT]").prop("disabled",!1).text("Specific amount"),e.hideNoExtendedData()},e.hideNoExtendedData=function(){$(".extended-data:visible").length?$("#no-extended-data").hide():$("#no-extended-data").show()},e.generateCode=function(){$("#generateCodeSpinner").show();var t={controller:"shop/voucher",method:"generateCode",success:function(t){e.generateCodeOk(t)}};return _nails_api.call(t),!1},this.generateCodeOk=function(e){$("#generateCodeSpinner").hide(),$("input[name=code]").val(e.code)},e.__construct()};
//# sourceMappingURL=admin.vouchers.createEdit.min.js.map
